#include <stdio.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <sys/types.h>
#include <unistd.h>
#include <string.h>

int main() {
    int shmid;
    char *shared;

    // Create shared memory segment
    shmid = shmget((key_t)1234, 1024, 0666 | IPC_CREAT);
    if (shmid == -1) {
        printf("Shared memory creation failed\n");
        return 1;
    }

    int pid = fork();

    if (pid > 0) { 
        // ----- Parent = Writer -----
        shared = (char *) shmat(shmid, NULL, 0);

        printf("Enter a message to write into shared memory: ");
        char msg[100];
        fgets(msg, sizeof(msg), stdin);

        strcpy(shared, msg);
        printf("Parent: Message written\n");

        shmdt(shared);
    } 
    else {        
        // ----- Child = Reader -----
        sleep(2); // wait for parent to write

        shared = (char *) shmat(shmid, NULL, 0);

        printf("Child: Message read = %s", shared);

        shmdt(shared);
        shmctl(shmid, IPC_RMID, NULL);  // delete shared memory
    }

    return 0;
}

output:
Enter a message to write into shared memory: Child: Message read = Hello via message queue !
Parent: Message written